var header=document.querySelector(".header"),estimate=document.querySelector(".estimate"),sticky=function(){event.target.defaultView.scrollY>=estimate.offsetTop?header.classList.add("header_no-sticky"):header.classList.remove("header_no-sticky")};document.addEventListener("scroll",sticky);var slideIndex=1;function plusSlides(e){showSlides(slideIndex+=e)}function currentSlide(e){showSlides(slideIndex=e)}function showSlides(e){var t=document.querySelectorAll(".slideshow__slide"),n=document.querySelectorAll(".slideshow__dot");e>t.length&&(slideIndex=1),e<1&&(slideIndex=t.length),t.forEach(function(e){return e.style.display="none"}),n.forEach(function(e){return e.classList.add("inactive")}),t[slideIndex-1].style.display="block",n[slideIndex-1].classList.remove("inactive"),n[slideIndex-1].classList.add("active")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}showSlides(slideIndex);var errors={ru:{emptyInput:"Это обязательное поле",outOfRange:"Должно быть от 2 до 30 символов",invalidLink:"Здесь должна быть почта",correctInput:""}},Api=function(){"use strict";function t(e){_classCallCheck(this,t),this.url=e.url}return _createClass(t,[{key:"get",value:function(e){return fetch("".concat(this.url,"/").concat(e))}},{key:"post",value:function(e,t){return console.log(this.api.url),fetch("".concat(this.api.url,"/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}}]),t}(),PaymentForm=function(){"use strict";function a(e,t,n){_classCallCheck(this,a),this.widget=t,this.form=e,this.api=n,this.paymentSum=this.form.querySelectorAll(".payment__sum"),this.paymentInput=this.form.querySelector(".payment__input-any-sum"),this.rubleSign=this.form.querySelector(".payment__label-any-sum"),this.name=this.form.querySelector(".payment__name"),this.email=this.form.querySelector(".payment__email"),this.buttons=this.form.querySelector(".payment__button-pay-container"),this.buttonMonthly=this.form.querySelector(".payment__monthly"),this.buttonOnes=this.form.querySelector(".payment__ones"),this.progressBar=this.form.querySelector(".payment__how-much"),this.progressText=this.form.querySelector(".payment__progress-text"),this.progressSum=this.form.querySelector("#payment__progress-sum"),this.progressTotalSum=this.form.querySelector("#payment__progress-total-sum")}return _createClass(a,[{key:"clearDefaultSum",value:function(e){e.target.classList.contains("payment__input-any-sum")&&0<e.target.value.length&&(this.paymentSum.forEach(function(e){e.checked=!1}),this.paymentInput.style.border="none",this.paymentInput.style.font="normal bold 18px arial, helvetica",this.rubleSign.style.color="#FC691B",e.target.parentElement.style.border="2px solid #FC691B")}},{key:"clearInputSum",value:function(e){e.target.classList.contains("payment__input-any-sum")&&0===e.target.value.length&&(this.paymentInput.style.borderBottom="1px solid #9397cb",this.paymentInput.style.font="normal normal 14px helvetica")}},{key:"setDefaultInput",value:function(e){e.target.classList.contains("payment__input-any-sum")&&0===e.target.value.length&&(this.paymentInput.parentElement.style.border="2px solid #9397CB",this.rubleSign.style.color="#9397CB")}},{key:"activateNameOrEmailInput",value:function(e){(e.target.classList.contains("payment__name")||e.target.classList.contains("payment__email"))&&(e.target.style.border="2px solid #FC691B")}},{key:"setDefaultNameOrEmailInput",value:function(e){(e.target.classList.contains("payment__name")&&0===e.target.value.length||e.target.classList.contains("payment__email")&&0===e.target.value.length)&&(e.target.style.border="2px solid #9397CB")}},{key:"checkInputs",value:function(e){var t=e.currentTarget.elements.payment__sum,n=e.currentTarget.elements.payment__suminput,a=e.currentTarget.elements.name,s=e.currentTarget.elements.email,r=e.currentTarget.elements.payment__agree;(Array.from(t).find(function(e){return!0===e.checked})||0<n.value)&&a.validity.valid&&s.validity.valid&&r.checked?this.activateButtons():this.disableButtons()}},{key:"openPaymentForm",value:function(e,t,n,a,s,r){e.preventDefault(),(e.target.classList.contains("payment__monthly_active")||e.target.classList.contains("payment__ones_active"))&&this.widget.charge({publicId:"test_api_00000000000000000000001",description:"Пример оплаты (деньги сниматься не будут)",amount:this.getAmount(),currency:"RUB",invoiceId:"1234567",accountId:"".concat(this.getEmail()),skin:"mini",data:{myProp:"myProp value"}},function(e){n.call(t,"infos",{info:{name:a.apply(t),email:s.apply(t),sum:r.apply(t)}})},function(e,t){console.log("Оплата не прошла")})}},{key:"activateButtons",value:function(){this.buttonMonthly.removeAttribute("disabled"),this.buttonMonthly.classList.add("payment__monthly_active"),this.buttonOnes.removeAttribute("disabled"),this.buttonOnes.classList.add("payment__ones_active")}},{key:"disableButtons",value:function(){this.buttonMonthly.setAttribute("disabled",!0),this.buttonMonthly.classList.remove("payment__monthly_active"),this.buttonOnes.removeAttribute("disabled"),this.buttonOnes.classList.remove("payment__ones_active")}},{key:"getEmail",value:function(){return this.email.value}},{key:"getAmount",value:function(){var e=Array.from(this.paymentSum).find(function(e){return!0===e.checked});return(e=e?Number(e.value):0)+(this.paymentInput.value?Number(this.paymentInput.value):0)}},{key:"getName",value:function(){return this.name.value}},{key:"countProgress",value:function(e){return(e/parseInt(this.progressTotalSum.textContent.replace(/\s+/g,""),10)*100).toFixed(3)}}]),a}(),api=new Api({url:"https://v2-api.sheety.co/a5ef5d923274b26c584a4e108ade8c58/payment"}),payForm=new PaymentForm(document.querySelector(".payment__form"),new cp.CloudPayments,api);function myFunction(){var e=document.querySelector(".help__input");console.log(e),e.select(),console.log(e),e.setSelectionRange(0,99999),document.execCommand("copy"),console.dir(window)}payForm.api.get("infos").then(function(e){return e.json()}).then(function(e){return e.infos}).then(function(e){e=e.reduce(function(e,t){return e+Number(t.sum)},0),payForm.progressSum.textContent=e,payForm.progressBar.style.width="".concat(payForm.countProgress(e),"%")}),payForm.form.addEventListener("input",function(e){payForm.clearDefaultSum(e),payForm.clearInputSum(e),payForm.activateNameOrEmailInput(e),payForm.checkInputs(e)}),payForm.form.addEventListener("focusout",function(e){payForm.setDefaultInput(e),payForm.setDefaultNameOrEmailInput(e)}),payForm.buttons.addEventListener("click",function(e){payForm.openPaymentForm(e,payForm,payForm.api.post,payForm.getName,payForm.getEmail,payForm.getAmount)});var shareImage=document.querySelector(".share__image"),smm=document.querySelector(".smm"),shareSmm=function(){event.target.closest(".share__image")?(shareImage.classList.add("share__image_disabled"),smm.classList.remove("smm_disabled")):event.target.closest(".share")||(shareImage.classList.remove("share__image_disabled"),smm.classList.add("smm_disabled"))};document.addEventListener("click",shareSmm);
//# sourceMappingURL=app.min.js.map